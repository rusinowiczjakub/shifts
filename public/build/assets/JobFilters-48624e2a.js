import{R as I,r as a,a as s,j as b,F as j}from"./app-fb04abf7.js";import{D as M}from"./Datepicker-c5d6c1e4.js";import{I as A}from"./InputLabel-ccd0bc20.js";import{T as L}from"./TextInput-4707038c.js";import{O as K,U as D,y as E,T as J,o as N,a as V,u as C,d as w,C as T,I as _,b as W}from"./open-closed-414f2176.js";import{I as z,a as Q,o as k,r as Y}from"./keyboard-19545c3e.js";import{T as Z}from"./use-resolve-button-type-749dbfe2.js";var U;let q=(U=I.startTransition)!=null?U:function(e){e()};var G=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(G||{}),X=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.LinkPanel=4]="LinkPanel",e[e.UnlinkPanel=5]="UnlinkPanel",e))(X||{});let ee={0:e=>({...e,disclosureState:C(e.disclosureState,{0:1,1:0})}),1:e=>e.disclosureState===1?e:{...e,disclosureState:1},4(e){return e.linkedPanel===!0?e:{...e,linkedPanel:!0}},5(e){return e.linkedPanel===!1?e:{...e,linkedPanel:!1}},2(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},3(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},R=a.createContext(null);R.displayName="DisclosureContext";function O(e){let t=a.useContext(R);if(t===null){let d=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,O),d}return t}let F=a.createContext(null);F.displayName="DisclosureAPIContext";function H(e){let t=a.useContext(F);if(t===null){let d=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,H),d}return t}let B=a.createContext(null);B.displayName="DisclosurePanelContext";function te(){return a.useContext(B)}function le(e,t){return C(t.type,ee,e,t)}let re=a.Fragment;function ae(e,t){let{defaultOpen:d=!1,...f}=e,p=a.useRef(null),l=E(t,J(g=>{p.current=g},e.as===void 0||e.as===a.Fragment)),o=a.useRef(null),y=a.useRef(null),u=a.useReducer(le,{disclosureState:d?0:1,linkedPanel:!1,buttonRef:y,panelRef:o,buttonId:null,panelId:null}),[{disclosureState:r,buttonId:n},m]=u,i=N(g=>{m({type:1});let P=Q(p);if(!P||!n)return;let c=(()=>g?g instanceof HTMLElement?g:g.current instanceof HTMLElement?g.current:P.getElementById(n):P.getElementById(n))();c==null||c.focus()}),h=a.useMemo(()=>({close:i}),[i]),v=a.useMemo(()=>({open:r===0,close:i}),[r,i]),$={ref:l};return I.createElement(R.Provider,{value:u},I.createElement(F.Provider,{value:h},I.createElement(V,{value:C(r,{0:w.Open,1:w.Closed})},T({ourProps:$,theirProps:f,slot:v,defaultTag:re,name:"Disclosure"}))))}let ne="button";function se(e,t){let d=z(),{id:f=`headlessui-disclosure-button-${d}`,...p}=e,[l,o]=O("Disclosure.Button"),y=te(),u=y===null?!1:y===l.panelId,r=a.useRef(null),n=E(r,t,u?null:l.buttonRef),m=_();a.useEffect(()=>{if(!u)return o({type:2,buttonId:f}),()=>{o({type:2,buttonId:null})}},[f,o,u]);let i=N(c=>{var S;if(u){if(l.disclosureState===1)return;switch(c.key){case k.Space:case k.Enter:c.preventDefault(),c.stopPropagation(),o({type:0}),(S=l.buttonRef.current)==null||S.focus();break}}else switch(c.key){case k.Space:case k.Enter:c.preventDefault(),c.stopPropagation(),o({type:0});break}}),h=N(c=>{switch(c.key){case k.Space:c.preventDefault();break}}),v=N(c=>{var S;Y(c.currentTarget)||e.disabled||(u?(o({type:0}),(S=l.buttonRef.current)==null||S.focus()):o({type:0}))}),$=a.useMemo(()=>({open:l.disclosureState===0}),[l]),g=Z(e,r),P=u?{ref:n,type:g,onKeyDown:i,onClick:v}:{ref:n,id:f,type:g,"aria-expanded":l.disclosureState===0,"aria-controls":l.linkedPanel?l.panelId:void 0,onKeyDown:i,onKeyUp:h,onClick:v};return T({mergeRefs:m,ourProps:P,theirProps:p,slot:$,defaultTag:ne,name:"Disclosure.Button"})}let oe="div",ue=K.RenderStrategy|K.Static;function ie(e,t){let d=z(),{id:f=`headlessui-disclosure-panel-${d}`,...p}=e,[l,o]=O("Disclosure.Panel"),{close:y}=H("Disclosure.Panel"),u=_(),r=E(t,l.panelRef,v=>{q(()=>o({type:v?4:5}))});a.useEffect(()=>(o({type:3,panelId:f}),()=>{o({type:3,panelId:null})}),[f,o]);let n=W(),m=(()=>n!==null?(n&w.Open)===w.Open:l.disclosureState===0)(),i=a.useMemo(()=>({open:l.disclosureState===0,close:y}),[l,y]),h={ref:r,id:f};return I.createElement(B.Provider,{value:l.panelId},T({mergeRefs:u,ourProps:h,theirProps:p,slot:i,defaultTag:oe,features:ue,visible:m,name:"Disclosure.Panel"}))}let ce=D(ae),de=D(se),pe=D(ie),x=Object.assign(ce,{Button:de,Panel:pe});const me=({setData:e,data:t,filters:d=[],submitFilters:f})=>{const p=a.useRef(),l=a.useRef(),[o,y]=a.useState(!1),u=(r,n,m)=>{Array.isArray(t[r])?(e(i=>{const h=new Set(i[r]||[]);return m?h.add(n):h.delete(n),{...i,[r]:Array.from(h)}}),y(!0)):(e(i=>({...i,[r]:n})),y(!0))};return a.useEffect(()=>{o&&(f(),y(!1))},[o]),a.useEffect(()=>{p!=null&&p.current&&(l!=null&&l.current)&&(new M(p.current,{format:"dd/mm/yyyy",language:"pl"}),new M(l.current,{format:"dd/mm/yyyy",language:"pl"}))},[p.current,l.current]),s("main",{className:"w-full",children:s("section",{"aria-labelledby":"products-heading",className:"lg:pb-24 pt-6",children:s("div",{className:"w-full",children:b("form",{className:"lg:block",children:[d.map(r=>s(x,{defaultOpen:!0,as:"div",className:"border-b border-gray-200 py-6",children:({open:n})=>b(j,{children:[s("h3",{className:"-my-3 flow-root",children:b(x.Button,{className:"flex w-full items-center justify-between py-3 text-sm text-gray-400 hover:text-gray-500",children:[s("span",{className:"font-medium text-gray-900",children:r.name}),s("span",{className:"ml-6 flex items-center",children:n?"-":"+"})]})}),s(x.Panel,{className:"pt-6",children:s("div",{className:"space-y-4",children:r.options.map((m,i)=>b("div",{className:"flex items-center",children:[s("input",{id:`filter-${r.id}-${i}`,name:`${r.id}[]`,type:"checkbox",checked:t[r.id].includes(m.value),onChange:h=>u(r.id,m.value,h.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),console.log(t[r.id],m.value),s("label",{htmlFor:`filter-${r.id}-${i}`,className:"ml-3 text-sm text-gray-600",children:m.label})]},m.value))})})]})},r.id)),s(x,{defaultOpen:!0,as:"div",className:"border-b border-gray-200 py-6",children:({open:r})=>b(j,{children:[s("h3",{className:"-my-3 flow-root",children:b(x.Button,{className:"flex w-full items-center justify-between py-3 text-sm text-gray-400 hover:text-gray-500",children:[s("span",{className:"font-medium text-gray-900",children:"Data"}),s("span",{className:"ml-6 flex items-center",children:r?"-":"+"})]})}),s(x.Panel,{className:"pt-6",children:b("div",{className:"flex justify-between",children:[b("div",{className:"w-full mr-2",children:[s(A,{htmlFor:"period_start",value:"Okres od"}),s(L,{ref:p,datepicker:!0,"datepicker-autohide":"true",type:"text",className:"w-full",placeholder:"Wybierz datę",value:t.periodStart??"",onChange:n=>u("periodStart",n.target.value,!0),onSelect:n=>u("periodStart",n.target.value,!0),id:"datepickerFrom"})]}),b("div",{className:"w-full ml-2",children:[s(A,{htmlFor:"period_end",value:"Okres do"}),s(L,{ref:l,datepicker:!0,"datepicker-autohide":"true",type:"text",className:"w-full",placeholder:"Wybierz datę",value:t.periodEnd??"",onChange:n=>u("periodEnd",n.target.value,!0),id:"datepickerTo",onSelect:n=>u("periodEnd",n.target.value,!0)})]})]})})]})},"date-range")]})})})})},Pe=me;export{Pe as default};
